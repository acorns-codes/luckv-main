<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.luckv.demo.mapper.UserMapper">
  <!-- 아아디 중복 확인 -->
    <select id="getId" parameterType="com.luckv.demo.dto.user" resultType="java.lang.Integer">
        SELECT 
        	IFNULL(COUNT(*), 0) 
        FROM USER
        WHERE MID = #{mid}
    </select>

      <!-- 회원 가입 -->
    <insert id="addMember" parameterType="com.luckv.demo.dto.user">
        INSERT INTO 
        	USER (
        		MNO, 
        		MID, 
        		PWD, 
        		NAME, 
        		PH, 
        		BIRTH_DATE, 
        		AUTH, 
        		ACCCOUNT
        	) VALUES (
        		#{mno}, 
        		#{mid}, 
        		#{pwd}, 
        		#{name}, 
        		#{ph}, 
        		#{birthDate}, 
        		#{auth}, 
        		#{acccount}
        	)
    </insert>

      <!-- 로그인 -->
    <select id="login" parameterType="com.luckv.demo.dto.user" resultType="com.luckv.demo.dto.user">
        SELECT 
        	MID, NAME, AUTH 
        FROM USER
        WHERE MID = #{mid} AND PWD = #{pwd}
    </select>
    
    <!-- 회원정보 수정 -->
	<update id="updateMember" parameterType="com.luckv.demo.dto.user">
		UPDATE USER SET 
			PWD = #{pwd},
			PH = #{ph}
		WHERE MNO = #{mno}
	</update>
	
	 <!--회원조회 -->
    <select id="infoMember" parameterType="com.luckv.demo.dto.user" resultType="com.luckv.demo.dto.user">
        SELECT 
        	*
        FROM USER
        WHERE MNO = #{mno} 
    </select>
</mapper>